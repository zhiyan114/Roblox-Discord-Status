local HttpService = game:GetService("HttpService");
local MarketPlaceService = game:GetService("MarketplaceService")
local SocketCon = false;
function HandleMessage(msg)
  print("[RobloxStatus]: "..msg)
end
function ReplyGameInfo(socket)
  socket:Send(HttpService:JSONEncode(socket))
end
if(syn) then
  local socket = syn.websocket.connect("ws://localhost:11111")
  SocketCon = true
  ReplyGameInfo(socket)
  local handler = socket.OnMessage:Connect(function(msg)
    HandleMessage(msg)
  end)
  socket.OnClose:Connect(function()
    handler:disconnect();
    while(true) do
      wait(5)
      local status = pcall(function()
        socket = syn.websocket.connect("ws://localhost:11111")
      end)
      if (status) then
        SocketCon = true;
        handler = socket.OnMessage:Connect(function(msg)
          HandleMessage(msg);
        end)
        ReplyGameInfo(socket)
        break;
      end
      warn("[RobloxStatus]: Backend disconnected, 5 seconds timeout before reconnecting...")
    end
  end)
else
  error("Non-Compatible client has been detected")
end
